@if (currentProblem){
<div class="container-fluid min-vh-100 d-flex flex-column">
  <!-- Заголовок и прогресс -->
  <div class="row py-3 bg-light">
    <div class="col text-center">
      <h2 class="h4 mb-0">Тренировка таблицы умножения</h2>
      <div class="text-muted">Задача {{ progress.current }} из {{ progress.total }}</div>
    </div>
  </div>

  <!-- Основной контент -->
  <div class="row flex-grow-1 align-items-center">
    <div class="col-12 text-center">
      <!-- Задача -->
      <div class="mb-4">
        <h1 class="display-1 fw-bold text-primary">
          {{ currentProblem.a  }} × {{ currentProblem.b }} = ?
        </h1>
        
        <!-- Поле ввода -->
        <div class="mt-4">
          <input #answerInput type="number" inputmode="numeric" 
                 class="form-control form-control-lg text-center mx-auto" 
                 style="max-width: 200px; font-size: 2rem;"
                 (focusout)="oninputblur()"
                 (blur)="oninputblur()"
                 [(ngModel)]="userAnswer"
                 autofocus>
        </div>

        @if (showAnswerTimer){
        <div class="mt-3">
          <div class="alert alert-info d-inline-block">
            <strong>{{ lastTotalSeconds | number: '1.1-1' }}</strong>
          </div>
        </div>

        }
        <!-- Правильный ответ (если показан) -->
@if (showCorrectAnswer || isAnswerShown){
<div class="mt-3">
  <div class="alert alert-info d-inline-block">
    <strong>Правильный ответ:</strong> {{ currentProblem.answer }}
    @if (isAnswerShown) {
      <span class="ms-2 text-warning">(показано автоматически)</span>
    }
  </div>
</div>
}
      </div>
    </div>
  </div>

  <!-- Статистика -->
  <div class="row py-3 bg-light">
    <div class="col-6 text-center">
      <div class="h5 text-success">Правильно: {{ stats.correct }}</div>
    </div>
    <div class="col-6 text-center">
      <div class="h5 text-danger">Неправильно: {{ stats.incorrect }}</div>
    </div>
  </div>

  <!-- Уведомление -->
   @if (showFeedback){
  <div  
       [class]="'alert ' + feedbackClass + ' position-fixed top-50 start-50 translate-middle'"
       style="z-index: 1050; min-width: 300px; text-align: center;">
    <div>{{ feedbackTitle }}</div>
    <div style="font-size: 3rem;">{{ feedbackMessage }}</div>
  </div>
   }
  <!-- Кнопка остановки -->
  <div class="position-fixed top-0 end-0 m-3">
    <button class="btn btn-outline-danger btn-sm" (click)="stopTraining()">
      Завершить
    </button>
  </div>
</div>
}
@else{
  <app-results></app-results>
}